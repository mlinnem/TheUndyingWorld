import anthropic

import logging
import http.client as http_client

# Set up HTTP request logging
http_client.HTTPConnection.debuglevel = 1

# Configure logging
logging.basicConfig()
logging.getLogger().setLevel(logging.DEBUG)
requests_log = logging.getLogger("requests.packages.urllib3")
requests_log.setLevel(logging.DEBUG)
requests_log.propagate = True

client = anthropic.Anthropic()

response = client.beta.prompt_caching.messages.create(
    model="claude-3-5-sonnet-20241022",
    max_tokens=1024,
    system=[
      {
        "type": "text",
        "text": "You are an AI assistant tasked with analyzing literary works. Your goal is to provide insightful commentary on themes, characters, and writing style.\n",
      },
      {
        "type": "text",
        "text": "wwwoiefujweoifujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpioujweopfihjerpgiuwrhipghu;werth;pghuwrhtph;wrijthpowrijthpoiwrtjphorijtohijerofiwerjfoiwejfoirtjghperoijgoeijrg[eiowrjtphwroijthioerjthpiorwjhpoiwrtjhporiwtjhpowritjhpwriotjhporitjhoritjhoirjhoritjhpriotjhoirtjhoritjhoritjhoritjhoritjhoritjhortijhorithjroithjroithjroithjriothjrtoihjrtoihjroithjrtoihjroithjroijgeorigjeprioghjrpwtihjrwpithjwrpotihjrpoihjwrptoihjwrpoitjhwprotijhpwroithjprwoitjhropiwtjhpowirtjphoiwrjthpoiwrjthpiowrtjhp]"
      }
    ],
    messages=[{"role": "user", "content": [{"type": "text", "text": "Analyze the major themes in 'Pride and Prejudice'.", "cache_control": {"type": "ephemeral"}}]}],
)
print(response)